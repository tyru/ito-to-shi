<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>糸通し</title>
  </head>
  <body onload='ItoToShi.onLoad()'>
    <!--
    <svg id='game'
         version="1.1"
         xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         width="200" height="200" xml:space="preserve">
      <rect x="0" y="0" fill="gray" width="10" height="70" />
      <rect x="2" y="1" fill="white" width="6" height="20" />
    </svg>

    <button onclick='doRequestFullscreen(document.getElementById("game"))'>フルスクリーン</button>
    -->

    <button onclick='ItoToShi.redraw([5,4,3,2,1])'>データセット変更</button>

    <style>
      #game {
        display: block;
        margin-bottom: 15px;
        border: solid 1px black;
      }
    </style>
    <script src='d3-v3.5.17/d3.js'></script>
    <script type="text/javascript">
      window.ItoToShi = (function() {
        var doRequestFullscreen = function doRequestFullscreen(elem) {
          if (elem.requestFullscreen) {
            elem.requestFullscreen();
          } else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen();
          } else if (elem.mozRequestFullScreen) {
            elem.mozRequestFullScreen();
          } else if (elem.webkitRequestFullscreen) {
            elem.webkitRequestFullscreen();
          }
        };
        var selections = function selections() {
          return d3.select("body").selectAll("p");
        };
        var redraw = function redraw(dataset) {
          selections()
            .data(dataset)
            .enter()
            .append("p")
            .text("新しいパラグラフ！");
        };
        var onLoad = function onLoad() {
          var dataset = [1,2,4,5];
          redraw(dataset);
        };

        return {
          doRequestFullscreen: doRequestFullscreen,
          redraw: redraw,
          onLoad: onLoad
        };
      })();
    </script>
  </body>
</html>
